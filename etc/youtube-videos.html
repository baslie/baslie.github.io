<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>YouTube auto-pause demo</title>
    <style>
    body {
        font-family: system-ui, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1rem;
        padding: 2rem;
        margin: 0;
    }

    h1 {
        margin: 0;
    }

    .uc-video-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 20px;
        width: 100%;
        max-width: 1200px;
    }

    .uc-video-wrapper {
        flex: 1 1 560px;
        max-width: 560px;
        min-width: 280px;
    }

    iframe {
        width: 100%;
        height: 315px;
        border: none;
    }

    @media (max-width:768px) {
        body {
            padding: 1rem;
        }

        h1 {
            font-size: 1.5rem;
            text-align: center;
        }

        .uc-video-container {
            flex-direction: column;
        }

        .uc-video-wrapper {
            max-width: 100%;
        }

        iframe {
            height: 200px;
        }
    }

    @media (max-width:480px) {
        body {
            padding: 0.5rem;
        }

        h1 {
            font-size: 1.2rem;
        }

        iframe {
            height: 180px;
        }
    }
    </style>
</head>

<body>
    <h1>Автоматическая пауза других YouTube-видео</h1>
    <div class="uc-video-container">
        <div class="uc-video-wrapper">
            <iframe class="uc-yt-player" id="player1" src="https://www.youtube.com/embed/9bZkp7q19f0?enablejsapi=1&playsinline=1&rel=0" allow="autoplay; encrypted-media" allowfullscreen>
            </iframe>
        </div>
        <div class="uc-video-wrapper">
            <iframe class="uc-yt-player" id="player2" src="https://www.youtube.com/embed/G7g8kNazmkI?enablejsapi=1&playsinline=1&rel=0" allow="autoplay; encrypted-media" allowfullscreen>
            </iframe>
        </div>
    </div>
    <!-- 1. API YouTube -->
    <script src="https://www.youtube.com/iframe_api" defer></script>
    <script>
    /* 2. Коллекция плееров */
    const players = [];

    /* 3. Функция-колбэк YouTube API */
    function onYouTubeIframeAPIReady() {
        document.querySelectorAll('.uc-yt-player').forEach(el => {
            players.push(new YT.Player(el.id, {
                playerVars: { playsinline: 1 },
                events: { onStateChange: handleState }
            }));
        });
    }

    /* 4. Авто-пауза */
    function handleState(evt) {
        if (evt.data === YT.PlayerState.PLAYING) {
            players.forEach(p => {
                if (p !== evt.target &&
                    p.getPlayerState &&
                    p.getPlayerState() === YT.PlayerState.PLAYING) {
                    p.pauseVideo();
                }
            });
        }
    }
    </script>
</body>

</html>
